<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja do Nakama - One Piece</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css.css">
    <style>
        
        .character-detail-page {
            padding: 20px;
        }

        .character-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
        }

        .character-header img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 30px;
        }

        .character-info {
            color: white;
        }

        .character-products {
            margin-top: 30px;
        }

        .back-button {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div id="app">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container" style="padding: 0px;">
                <a class="navbar-brand" href="#" @click="changePage('home')">
                    <img src="imagens\jolly-roger.png" class="jolly-roger" alt="Jolly Roger">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" :class="{ 'active': currentPage === 'home' }" href="#"
                                @click="changePage('home')">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" :class="{ 'active': currentPage === 'characters' }" href="#"
                                @click="changePage('characters')">produtos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" @click="changePage('rewards')">Recompensas</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" @click="changePage('akuma')">Akuma no Mi</a>
                        </li>
                    </ul>
                    <a href="#" class="btn btn-outline-danger position-relative" @click="changePage('cart')">
                        <i class="bi bi-cart"></i> Berries
                        <span v-if="cartItems.length > 0" class="cart-badge">
                            {{ cartItems.length }}
                        </span>
                    </a>
                </div>
            </div>
        </nav>

        <!-- Home Page (Products) -->
        <div v-if="currentPage === 'characters'">
            <div class="container my-5">
                <h1 class="text-center mb-4 text-warning">Mercado da Grand Line</h1>
                <div class="row row-cols-1 row-cols-md-3 g-4">
                    <div v-for="product in products" :key="product.id" class="col">
                        <div class="card pirate-card h-100">
                            <img :src="product.image" class="card-img-top" style="height: 300px; object-fit: cover;">
                            <div class="card-body">
                                <h4 class="card-title text-danger">{{ product.title }}</h4>
                                <p class="card-text">{{ product.description }}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-warning text-dark">฿ {{ formatPrice(product.price) }}</span>
                                    <button class="btn btn-danger" @click="addToCart(product)"
                                        :disabled="product.stock < 1">
                                        <i class="bi bi-cart-plus"></i> Comprar
                                    </button>
                                </div>
                                <div class="mt-2 text-end">
                                    <small class="text-muted">Estoque: {{ product.stock }}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div v-if="currentPage === 'cart'">
            <div class="container">
                <!-- Header -->
                <div class="pirate-header text-center mb-5">
                    <img src="imagens\jolly-roger.png" class="jolly-roger-sm mb-3" alt="Jolly Roger">
                    <h1 class="text-warning mb-0">TESOURO DO NAKAMA</h1>
                    <p class="text-muted">Seu baú de conquistas</p>
                </div>

                <!-- Empty Cart -->
                <div v-if="cartItems.length === 0" class="alert alert-warning text-center py-5">
                    <img src="https://static.wikia.nocookie.net/onepiece/images/6/64/Den_Den_Mushi.png"
                        class="den-den-mushi-sm" alt="Den Den Mushi">
                    <h4 class="mt-3 text-warning">YOHOHOHO! BAÚ VAZIO!</h4>
                    <p class="mb-0">Navegue pelas ilhas em busca de tesouros!</p>
                    <a href="#" class="btn btn-danger mt-3" @click="changePage('home')">
                        <i class="bi bi-compass"></i> Explorar Ilhas
                    </a>
                </div>

                <!-- Cart Items -->
                <div v-else>
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                        <div v-for="(item, index) in cartItems" :key="item.id" class="col">
                            <div class="card bounty-poster h-100">
                                <div class="card-header text-white">
                                    <i class="bi bi-star-fill me-2 text-warning"></i>
                                    {{ item.title }}
                                </div>
                                <div class="card-body pirate-item">
                                    <div class="row g-3">
                                        <div class="col-md-5">
                                            <img :src="item.image" class="img-fluid w-100 bounty-img" :alt="item.title">
                                        </div>
                                        <div class="col-md-7">
                                            <p class="small">{{ item.description }}</p>
                                            <div class="d-flex justify-content-between align-items-center mt-3">
                                                <span class="badge bg-warning text-dark fs-6">
                                                    <i class="bi bi-coin"></i> ฿ {{ formatPrice(item.price *
                                                    item.quantity) }}
                                                </span>
                                                <div class="input-group input-group-sm" style="width: 120px;">
                                                    <button class="btn btn-dark"
                                                        @click="updateQuantity(index, item.quantity - 1)">
                                                        <i class="bi bi-dash"></i>
                                                    </button>
                                                    <input type="number"
                                                        class="form-control text-center bg-dark text-white"
                                                        v-model="item.quantity" min="1"
                                                        @change="updateQuantity(index, item.quantity)">
                                                    <button class="btn btn-dark"
                                                        @click="updateQuantity(index, item.quantity + 1)">
                                                        <i class="bi bi-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer bg-dark text-center">
                                    <button @click="removeFromCart(index)" class="btn btn-outline-danger btn-sm">
                                        <i class="bi bi-trash"></i> Abandonar Tesouro
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Total Section -->
                    <div class="total-section mt-5 p-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="text-warning mb-0">
                                <img src="https://static.wikia.nocookie.net/onepiece/images/4/4e/Beli.png"
                                    class="berry-icon" alt="Berries">
                                RECOMPENSA TOTAL:
                            </h4>
                            <span class="badge bg-warning text-dark fs-4">฿ {{ formatPrice(calculateTotal()) }}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <button @click="clearCart" class="btn btn-outline-warning">
                                <i class="bi bi-trash"></i> Limpar Baú
                            </button>
                            <button @click="checkout" class="btn pirate-btn flex-grow-1 ms-3">
                                <i class="bi bi-sailboat"></i> ZARPAR PARA AVENTURA!
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Characters Page -->
        <div v-if="currentPage === 'home'">
            <div class="container-fluid p-0">
                <div class="banner-container">
                    <img src="imagens\luffy-chapeu.gif" alt="One Piece Banner" id="banner">
                    <h1 class="h1">Bem-vindo Nakama!</h1>
                </div>

                <div class="main">
                    <div class="cards-container">
                        <div v-for="character in characters" :key="character.id" class="custom-card"
                            @click="showCharacterDetail(character)">
                            <img :src="character.image" :alt="character.name" class="img">
                            <div class="textBox">
                                <p class="text head">{{ character.name }}</p>
                                <span>{{ character.role }}</span>
                                <button v-if="character.product" class="btn btn-sm btn-warning mt-2"
                                    @click.stop="addCharacterToCart(character)">
                                    Comprar Figura
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Character Detail Page -->
        <div v-if="currentPage === 'character-detail'" class="character-detail-page">
            <div class="container">
                <button class="btn btn-outline-warning back-button" @click="changePage('home')">
                    <i class="bi bi-arrow-left"></i> Voltar para Home
                </button>

                <div class="character-header">
                    <img :src="selectedCharacter.image" :alt="selectedCharacter.name">
                    <div class="character-info">
                        <h2 class="text-warning">{{ selectedCharacter.name }}</h2>
                        <p class="text-white">{{ selectedCharacter.role }}</p>
                        <p class="text-white" v-if="selectedCharacter.description">{{ selectedCharacter.description }}
                        </p>
                    </div>
                </div>

                <!-- Atualize a seção character-products no template -->
                <div class="character-products"
                    v-if="selectedCharacter.products && selectedCharacter.products.length > 0">
                    <h3 class="text-warning mb-4">Itens deste Personagem</h3>
                    <div class="row">
                        <div v-for="product in selectedCharacter.products" :key="product.id" class="col-md-6 mb-4">
                            <div class="card pirate-card h-100">
                                <img :src="product.image" class="card-img-top p-2"
                                    style="height: 300px; object-fit: cover;">
                                <div class="card-body">
                                    <h4 class="card-title text-danger">{{ product.title }}</h4>
                                    <p class="card-text">{{ product.description }}</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="badge bg-warning text-dark">฿ {{ formatPrice(product.price)
                                            }}</span>
                                        <button class="btn btn-danger" @click="addToCart(product)"
                                            :disabled="product.stock < 1">
                                            <i class="bi bi-cart-plus"></i> Comprar
                                        </button>
                                    </div>
                                    <div class="mt-2 text-end">
                                        <small class="text-muted">Estoque: {{ product.stock }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div v-else class="alert alert-info">
                    Este personagem não possui itens disponíveis no momento.
                </div>

            </div>
        </div>

        <!-- Footer Temático -->
        <footer class="bg-dark text-warning py-4 mt-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 text-center">
                        <img src="https://static.wikia.nocookie.net/onepiece/images/6/64/Den_Den_Mushi.png"
                            class="den-den-mushi" alt="Den Den Mushi">
                        <h4>Contato do Nakama</h4>
                        <p>New World, Grand Line</p>
                        <p>Den Den Mushi: (55) 5555-5555</p>
                    </div>
                    <div class="col-md-6 text-center">
                        <h4>Recompensas Atuais</h4>
                        <ul class="list-unstyled">
                            <li>Luffy: ฿3,000,000,000</li>
                            <li>Zoro: ฿1,111,000,000</li>
                            <li>Sanji: ฿1,032,000,000</li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Notification -->
        <div class="notification" :class="{ 'show': showNotification }">
            {{ notificationMessage }}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                // Estado da aplicação
                const currentPage = ref('home');
                const cartItems = ref([]);
                const showNotification = ref(false);
                const notificationMessage = ref('');
                const selectedCharacter = ref(null);

                // Produtos disponíveis
                const products = ref([
               
                    {
                        id: 1,
                        title: "Figura Luffy Gear 5",
                        description: "Action figure do Capitão com detalhes em ouro",
                        image: "imagens/action-figure-luffy-one-piece-17cm-anime-decoracao-boneco.png",
                        price: 1500000,
                        stock: 5
                    },
                    {
                        id: 2,
                        title: "Espada de Zoro",
                        description: "Réplica Wado Ichimonji em aço inoxidável",
                        image: "imagens/wado-Ichimonji.avif",
                        price: 3200000,
                        stock: 3
                    },
                    {
                        id: 3,
                        title: "Poster Akuma no Mi",
                        description: "Coleção completa de frutas do diabo",
                        image: "imagens/todas-as-frutas-de-one-piece-imagens-1024x576.jpg",
                        price: 750000,
                        stock: 10
                    },
                    {
                        id: 4,
                        title: "Log Pose",
                        description: "Bússola especial para navegar na Grand Line",
                        image: "imagens/logposeimg.webp",
                        price: 500000,
                        stock: 7
                    },
                    {
                        id: 5,
                        title: "Chapéu de Palha",
                        description: "Réplica do icônico chapéu do Luffy",
                        image: "imagens/chapeu de palha.webp",
                        price: 1200000,
                        stock: 4
                    },
                    {
                        id: 6,
                        title: "Vivre Card",
                        description: "Papel especial que aponta para seu dono",
                        image: "imagens/vivre-card.jpg",
                        price: 850000,
                        stock: 6
                    },
                    {
                        id: 7,
                        title: "Bandana de Zoro",
                        description: "Bandana oficial verde de Roronoa Zoro",
                        image: "imagens/bandana.webp",
                        price: 450000,
                        stock: 8
                    },
                    {
                        id: 8,
                        title: "Óculos de Sanji",
                        description: "Réplica dos óculos do cozinheiro dos Chapéus de Palha",
                        image: "imagens/oculos-sanji.png",
                        price: 380000,
                        stock: 6
                    },
                    {
                        id: 9,
                        title: "Chapeu da robin",
                        description: "Chapéu de cowboy estilo robin pós-timeskip",
                        image: "imagens/chapeu-robin.png",
                        price: 550000,
                        stock: 5
                    },
                    {
                        id: 10,
                        title: "Chapeu do Brook",
                        description: "chapeu estilizado do músico Brook",
                        image: "imagens/chapeu-brook.png",
                        price: 620000,
                        stock: 4
                    },
                    {
                        id: 11,
                        title: "Luvas de Franky",
                        description: "Luvas metálicas no estilo SUPER do Franky",
                        image: "imagens/luvas-franky.png",
                        price: 780000,
                        stock: 3
                    },
                    {
                        id: 12,
                        title: "Mochila de Chopper",
                        description: "Mochila médica no estilo de Tony Tony Chopper",
                        image: "imagens/mochila-choper.avif",
                        price: 670000,
                        stock: 7
                    },
                    {
                        id: 13,
                        title: "colar da Robin",
                        description: "Acessório de pescoço no estilo de Nico Robin",
                        image: "imagens/colar-robin.jpg",
                        price: 490000,
                        stock: 9
                    },
                    {
                        id: 14,
                        title: "Estilingue de Usopp",
                        description: "Réplica do estilingue Kabuto de Usopp",
                        image: "imagens/estilingue-usopp.jpg",
                        price: 920000,
                        stock: 2
                    },
                    {
                        id: 15,
                        title: "Bermuda de Jinbe",
                        description: "Bermuda no estilo do timoneiro Jinbe",
                        image: "imagens/bermuda-jinbe.jpg",
                        price: 580000,
                        stock: 5
                    },
                    {
                        id: 16,
                        title: "Kit de Tatuagem Pirata",
                        description: "Kit temporário de tatuagens no estilo One Piece",
                        image: "imagens/tatuagem-pirata.jpg",
                        price: 250000,
                        stock: 15
                    },
                    {
                        id: 17,
                        title: "Pôster Bando Chapéu de Palha",
                        description: "Pôster com todos os membros da tripulação",
                        image: "imagens/poster-bando.jpg",
                        price: 350000,
                        stock: 12
                    },
                    {
                        id: 18,
                        title: "Miniatura Thousand Sunny",
                        description: "Réplica em miniatura do navio Thousand Sunny",
                        image: "imagens/miniatura-sunny.jpg",
                        price: 1200000,
                        stock: 4
                    },
                    {
                        id: 19,
                        title: "Caneca One Piece",
                        description: "Caneca com design exclusivo de One Piece",
                        image: "imagens/caneca-onepiece.jpg",
                        price: 280000,
                        stock: 10
                    },
                    {
                        id: 20,
                        title: "Livro de Receitas do Sanji",
                        description: "Livro com receitas inspiradas no cozinheiro Sanji",
                        image: "imagens/livro-sanji.jpg",
                        price: 650000,
                        stock: 6
                    },
                    {
                        id: 21,
                        title: "Chaveiro Chapéu de Palha",
                        description: "Chaveiro metálico do símbolo de Luffy",
                        image: "imagens/chaveiro-luffy.jpg",
                        price: 180000,
                        stock: 15
                    },
                    {
                        id: 22,
                        title: "Kit 3 Espadas de Zoro",
                        description: "Réplicas em miniatura das 3 espadas",
                        image: "imagens/kit-espadas-zoro.jpg",
                        price: 2750000,
                        stock: 4
                    },
                    {
                        id: 23,
                        title: "Clima-Tact de Nami",
                        description: "Réplica funcional da arma meteorológica",
                        image: "imagens/clima-tact.jpg",
                        price: 920000,
                        stock: 6
                    },
                    {
                        id: 24,
                        title: "Kabuto de Usopp",
                        description: "Estilingue especial com mira laser",
                        image: "imagens/kabuto-usopp.jpg",
                        price: 680000,
                        stock: 7
                    },
                    {
                        id: 25,
                        title: "Luvas de Luta de Sanji",
                        description: "Luvas de combate com reforço metálico",
                        image: "imagens/luvas-sanji.jpg",
                        price: 420000,
                        stock: 8
                    },
                    {
                        id: 26,
                        title: "Kit Médico de Chopper",
                        description: "Bolsa médica com acessórios completos",
                        image: "imagens/kit-medico.jpg",
                        price: 880000,
                        stock: 5
                    },
                    {
                        id: 27,
                        title: "Livro de Poneglyphs",
                        description: "Réplica do livro de estudos de Robin",
                        image: "imagens/livro-poneglyph.jpg",
                        price: 1250000,
                        stock: 3
                    },
                    {
                        id: 28,
                        title: "Braço Mecânico de Franky",
                        description: "Braço robótico com efeitos sonoros",
                        image: "imagens/braco-franky.jpg",
                        price: 1980000,
                        stock: 2
                    },
                    {
                        id: 29,
                        title: "Violino de Brook",
                        description: "Violino elétrico estilo Soul King",
                        image: "imagens/violino-brook.jpg",
                        price: 2100000,
                        stock: 4
                    },
                    {
                        id: 30,
                        title: "Luvas de Karatê de Jinbe",
                        description: "Luvas especiais para artes marciais",
                        image: "imagens/luvas-jinbe.jpg",
                        price: 720000,
                        stock: 6
                    }
                ]);
                // Personagens
                const characters = ref([
                    {
                        id: 1,
                        name: "Monkey D. Luffy",
                        role: "Capitão dos Piratas do Chapéu de Palha",
                        description: "Monkey D. Luffy, também conhecido como 'Chapéu de Palha', é o fundador e capitão dos Piratas do Chapéu de Palha. Seu sonho é se tornar o Rei dos Piratas.",
                        image: "imagens/Luffy Icon _ One Piece Icon.jpeg",
                        products: [{
                            id: 1,
                            title: "Figura Luffy Gear 5",
                            description: "Action figure do Capitão com detalhes em ouro",
                            image: "imagens/action-figure-luffy-one-piece-17cm-anime-decoracao-boneco.png",
                            price: 1500000,
                            stock: 5
                        }, {
                            id: 5,
                            title: "Chapéu de Palha",
                            description: "Réplica do icônico chapéu do Luffy",
                            image: "imagens/chapeu de palha.webp",
                            price: 1200000,
                            stock: 4
                        }, {
                            id: 17,
                            title: "Pôster Bando Chapéu de Palha",
                            description: "Pôster com todos os membros da tripulação",
                            image: "imagens/poster-bando.jpg",
                            price: 350000,
                            stock: 12
                        }, {
                            id: 21,
                            title: "Chaveiro Chapéu de Palha",
                            description: "Chaveiro metálico do símbolo de Luffy",
                            image: "imagens/chaveiro-luffy.jpg",
                            price: 180000,
                            stock: 15
                        }]
                    },
                    {
                        id: 2,
                        name: "Roronoa Zoro",
                        role: "Espadachim dos Chapéu de Palha",
                        description: "Roronoa Zoro é o espadachim dos Piratas do Chapéu de Palha e um dos principais combatentes da tripulação. Seu sonho é se tornar o maior espadachim do mundo.",
                        image: "imagens/zoro-car.webp",
                        products: [{
                            id: 2,
                            title: "Espada de Zoro",
                            description: "Réplica Wado Ichimonji em aço inoxidável",
                            image: "imagens/wado-Ichimonji.avif",
                            price: 3200000,
                            stock: 3
                        }, {
                            id: 7,
                            title: "Bandana de Zoro",
                            description: "Bandana oficial verde de Roronoa Zoro",
                            image: "imagens/bandana-zoro.jpg",
                            price: 450000,
                            stock: 8
                        }, {
                            id: 19,
                            title: "Caneca One Piece",
                            description: "Caneca com design exclusivo de One Piece",
                            image: "imagens/caneca-onepiece.jpg",
                            price: 280000,
                            stock: 10
                        }, {
                            id: 22,
                            title: "Kit 3 Espadas de Zoro",
                            description: "Réplicas em miniatura das 3 espadas",
                            image: "imagens/kit-espadas-zoro.jpg",
                            price: 2750000,
                            stock: 4
                        }]
                    },
                    {
                        id: 3,
                        name: "Nami",
                        role: "Navegadora dos Chapéu de Palha",
                        description: "Nami é a navegadora dos Piratas do Chapéu de Palha. Ela é especialista em cartografia e meteorologia, e seu sonho é desenhar um mapa completo do mundo.",
                        image: "imagens/nami-card.png",
                        products: [{
                            id: 4,
                            title: "Log Pose",
                            description: "Bússola especial para navegar na Grand Line",
                            image: "imagens/logposeimg.webp",
                            price: 500000,
                            stock: 7
                        }, {
                            id: 9,
                            title: "Chapeu de Nami",
                            description: "Chapéu de cowboy estilo Nami pós-timeskip",
                            image: "imagens/chapeu-nami.jpg",
                            price: 550000,
                            stock: 5
                        },
                        {
                            id: 16,
                            title: "Kit de Tatuagem Pirata",
                            description: "Kit temporário de tatuagens no estilo One Piece",
                            image: "imagens/tatuagem-pirata.jpg",
                            price: 250000,
                            stock: 15
                        },
                        {
                            id: 23,
                            title: "Clima-Tact de Nami",
                            description: "Réplica funcional da arma meteorológica",
                            image: "imagens/clima-tact.jpg",
                            price: 920000,
                            stock: 6
                        }]
                    },
                    {
                        id: 4,
                        name: "Usopp",
                        role: "Atirador dos Chapéu de Palha",
                        description: "Usopp é o atirador dos Piratas do Chapéu de Palha. Ele é conhecido por suas histórias exageradas e seu sonho é se tornar um bravo guerreiro do mar.",
                        image: "imagens/Usopp-card.jpg",
                        products: [{
                            id: 14,
                            title: "Estilingue de Usopp",
                            description: "Réplica do estilingue Kabuto de Usopp",
                            image: "imagens/estilingue-usopp.jpg",
                            price: 920000,
                            stock: 2
                        }, {
                            id: 19,
                            title: "Caneca usopp",
                            description: "Caneca com design exclusivo de One Piece",
                            image: "imagens/caneca-onepiece.jpg",
                            price: 280000,
                            stock: 10
                        },
                        {
                            id: 24,
                            title: "Kabuto de Usopp",
                            description: "Estilingue especial com mira laser",
                            image: "imagens/kabuto-usopp.jpg",
                            price: 680000,
                            stock: 7
                        },]
                    },
                    {
                        id: 5,
                        name: "Sanji",
                        role: "Cozinheiro dos Chapéu de Palha",
                        description: "Sanji é o cozinheiro dos Piratas do Chapéu de Palha. Ele é especialista em artes marciais com os pés e seu sonho é encontrar o All Blue, um mar lendário.",
                        image: "imagens/sanji-card.jpg",
                        products: [{
                            id: 8,
                            title: "Óculos de Sanji",
                            description: "Réplica dos óculos do cozinheiro dos Chapéus de Palha",
                            image: "imagens/oculos-sanji.jpg",
                            price: 380000,
                            stock: 6
                        }, {
                            id: 19,
                            title: "Caneca One Piece",
                            description: "Caneca com design exclusivo de One Piece",
                            image: "imagens/caneca-onepiece.jpg",
                            price: 280000,
                            stock: 10
                        },
                        {
                            id: 20,
                            title: "Livro de Receitas do Sanji",
                            description: "Livro com receitas inspiradas no cozinheiro Sanji",
                            image: "imagens/livro-sanji.jpg",
                            price: 650000,
                            stock: 6
                        },
                        {
                            id: 25,
                            title: "Luvas de Luta de Sanji",
                            description: "Luvas de combate com reforço metálico",
                            image: "imagens/luvas-sanji.jpg",
                            price: 420000,
                            stock: 8
                        },]
                    },
                    {
                        id: 6,
                        name: "Tony Tony Chopper",
                        role: "Médico dos Chapéu de Palha",
                        description: "Chopper é o médico dos Piratas do Chapéu de Palha. Ele é uma rena que comeu a Hito Hito no Mi, que lhe deu forma humana e inteligência.",
                        image: "imagens/chopper-card.jpg",
                        products: [{
                            id: 12,
                            title: "Mochila de Chopper",
                            description: "Mochila médica no estilo de Tony Tony Chopper",
                            image: "imagens/mochila-chopper.jpg",
                            price: 670000,
                            stock: 7
                        }, {
                            id: 26,
                            title: "Kit Médico de Chopper",
                            description: "Bolsa médica com acessórios completos",
                            image: "imagens/kit-medico.jpg",
                            price: 880000,
                            stock: 5
                        }]
                    },
                    {
                        id: 7,
                        name: "Nico Robin",
                        role: "Arqueóloga dos Chapéu de Palha",
                        description: "Nico Robin é a arqueóloga dos Piratas do Chapéu de Palha. Ela é a única pessoa no mundo capaz de ler os Poneglyphs e seu sonho é descobrir a verdade sobre o Século Perdido.",
                        image: "imagens/robin-card.jpg",
                        products: [{
                            id: 13,
                            title: "Pêndulo de Robin",
                            description: "Acessório de pescoço no estilo de Nico Robin",
                            image: "imagens/pendulo-robin.jpg",
                            price: 490000,
                            stock: 9
                        }]
                    },
                    {
                        id: 8,
                        name: "Franky",
                        role: "Carpinteiro dos Chapéu de Palha",
                        description: "Franky é o carpinteiro dos Piratas do Chapéu de Palha. Ele é um cyborg que construiu o Thousand Sunny, o navio atual da tripulação.",
                        image: "imagens/franky-card.webp",
                        products: [{
                            id: 11,
                            title: "Luvas de Franky",
                            description: "Luvas metálicas no estilo SUPER do Franky",
                            image: "imagens/luvas-franky.jpg",
                            price: 780000,
                            stock: 3
                        }]
                    },
                    {
                        id: 9,
                        name: "Brook",
                        role: "Músico dos Chapéu de Palha",
                        description: "Brook é o músico dos Piratas do Chapéu de Palha. Ele é um esqueleto que comeu a Yomi Yomi no Mi, que lhe deu uma segunda vida.",
                        image: "imagens/brook-card.jpg",
                        products: [{
                            id: 10,
                            title: "Fone de Brook",
                            description: "Fone de ouvido estilizado do músico Brook",
                            image: "imagens/fone-brook.jpg",
                            price: 620000,
                            stock: 4
                        }]
                    },
                    {
                        id: 10,
                        name: "Jinbe",
                        role: "Timoneiro dos Chapéu de Palha",
                        description: "Jinbe é o timoneiro dos Piratas do Chapéu de Palha. Ele é um homem-peixe especialista em karatê homem-peixe e ex-membro dos Shichibukai.",
                        image: "imagens/jinbe-meme-card.jpg",
                        products: [{
                            id: 15,
                            title: "Bermuda de Jinbe",
                            description: "Bermuda no estilo do timoneiro Jinbe",
                            image: "imagens/bermuda-jinbe.jpg",
                            price: 580000,
                            stock: 5
                        }]
                    }
                ]);


                // Carregar carrinho do localStorage
                onMounted(() => {
                    const savedCart = localStorage.getItem('onepiece-cart');
                    if (savedCart) {
                        cartItems.value = JSON.parse(savedCart);

                        // Atualizar estoque dos produtos
                        updateProductStock();
                    }
                });

                // Atualizar estoque com base no carrinho
                const updateProductStock = () => {
                    cartItems.value.forEach(cartItem => {
                        const productIndex = products.value.findIndex(p => p.id === cartItem.id);
                        if (productIndex !== -1) {
                            // Reduzir o estoque pelo que já está no carrinho
                            const originalStock = products.value[productIndex].originalStock || products.value[productIndex].stock + cartItem.quantity;
                            products.value[productIndex].originalStock = originalStock;
                            products.value[productIndex].stock = originalStock - cartItem.quantity;
                        }
                    });
                };

                // Salvar carrinho no localStorage
                const saveCart = () => {
                    localStorage.setItem('onepiece-cart', JSON.stringify(cartItems.value));
                };

                // Mudar página
                const changePage = (page) => {
                    currentPage.value = page;
                    window.scrollTo(0, 0);
                };

                // Mostrar detalhes do personagem
                const showCharacterDetail = (character) => {
                    selectedCharacter.value = character;
                    changePage('character-detail');
                };

                // Adicionar ao carrinho
                const addToCart = (product) => {
                    if (product.stock > 0) {
                        // Verificar se o produto já está no carrinho
                        const existingItem = cartItems.value.find(item => item.id === product.id);

                        if (existingItem) {
                            existingItem.quantity++;
                        } else {
                            cartItems.value.push({
                                id: product.id,
                                title: product.title,
                                description: product.description,
                                image: product.image,
                                price: product.price,
                                quantity: 1
                            });
                        }

                        // Atualizar estoque
                        product.stock--;

                        // Mostrar notificação
                        showNotification.value = true;
                        notificationMessage.value = `${product.title} adicionado ao carrinho!`;

                        // Esconder notificação após 3 segundos
                        setTimeout(() => {
                            showNotification.value = false;
                        }, 3000);

                        // Salvar carrinho
                        saveCart();
                    }
                };

                // Adicionar produto de personagem ao carrinho
                const addCharacterToCart = (character) => {
                    if (character.product && character.product.stock > 0) {
                        // Encontrar o produto real
                        const realProduct = products.value.find(p => p.id === character.product.id);
                        if (realProduct && realProduct.stock > 0) {
                            addToCart(realProduct);
                        }
                    }
                };

                // Remover do carrinho
                const removeFromCart = (index) => {
                    const item = cartItems.value[index];

                    // Restaurar estoque
                    const productIndex = products.value.findIndex(p => p.id === item.id);
                    if (productIndex !== -1) {
                        products.value[productIndex].stock += item.quantity;
                    }

                    // Remover item
                    cartItems.value.splice(index, 1);

                    // Salvar carrinho
                    saveCart();
                };

                // Atualizar quantidade
                const updateQuantity = (index, quantity) => {
                    const item = cartItems.value[index];
                    const oldQuantity = item.quantity;

                    // Verificar se a quantidade é válida
                    if (quantity < 1) {
                        removeFromCart(index);
                        return;
                    }

                    // Encontrar o produto
                    const productIndex = products.value.findIndex(p => p.id === item.id);
                    if (productIndex !== -1) {
                        const product = products.value[productIndex];

                        // Verificar se há estoque suficiente
                        const quantityDiff = quantity - oldQuantity;
                        if (quantityDiff > 0 && quantityDiff > product.stock) {
                            // Mostrar notificação
                            showNotification.value = true;
                            notificationMessage.value = `Estoque insuficiente para ${product.title}!`;

                            // Esconder notificação após 3 segundos
                            setTimeout(() => {
                                showNotification.value = false;
                            }, 3000);

                            return;
                        }

                        // Atualizar estoque
                        product.stock -= quantityDiff;
                    }

                    // Atualizar quantidade
                    item.quantity = quantity;

                    // Salvar carrinho
                    saveCart();
                };

                // Limpar carrinho
                const clearCart = () => {
                    // Restaurar estoque
                    cartItems.value.forEach(item => {
                        const productIndex = products.value.findIndex(p => p.id === item.id);
                        if (productIndex !== -1) {
                            products.value[productIndex].stock += item.quantity;
                        }
                    });

                    // Limpar carrinho
                    cartItems.value = [];

                    // Salvar carrinho
                    saveCart();
                };

                // Finalizar compra
                const checkout = () => {
                    // Mostrar notificação
                    showNotification.value = true;
                    notificationMessage.value = `YOHOHOHO! Compra finalizada com sucesso! Total: ฿${formatPrice(calculateTotal())}`;

                    // Esconder notificação após 3 segundos
                    setTimeout(() => {
                        showNotification.value = false;
                    }, 3000);

                    // Limpar carrinho
                    clearCart();
                };

                // Calcular total
                const calculateTotal = () => {
                    return cartItems.value.reduce((total, item) => {
                        return total + (item.price * item.quantity);
                    }, 0);
                };

                // Formatar preço
                const formatPrice = (price) => {
                    return price.toLocaleString('pt-BR');
                };

                return {
                    currentPage,
                    products,
                    cartItems,
                    characters,
                    selectedCharacter,
                    showNotification,
                    notificationMessage,
                    changePage,
                    showCharacterDetail,
                    addToCart,
                    addCharacterToCart,
                    removeFromCart,
                    updateQuantity,
                    clearCart,
                    checkout,
                    calculateTotal,
                    formatPrice
                };
            }
        }).mount("#app");
    </script>
</body>

</html>
